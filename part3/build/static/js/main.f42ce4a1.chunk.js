(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),c=n.n(u),o=n(2),l=function(e){var t=e.filter,n=e.handleFilter;return r.a.createElement("div",null,"filter name:",r.a.createElement("input",{value:t,onChange:n}))},i=function(e){var t=e.text,n=e.value,a=e.handleChange;return r.a.createElement("div",null,t,": ",r.a.createElement("input",{value:n,onChange:a}))},s=function(e){var t=e.addPerson,n=e.addInputs;return r.a.createElement("form",{onSubmit:t},n.map((function(e){return r.a.createElement(i,{key:e.text,text:e.text,value:e.value,handleChange:e.handler})})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var t=e.person,n=e.deletePerson;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:n},"delete")))},d=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:t.type},t.message)},f=n(3),p=n.n(f),h="/api/persons",v=function(){return p.a.get(h).then((function(e){return e.data}))},b=function(e){return p.a.post(h,e).then((function(e){return e.data}))},E=function(e,t){return p.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){return p.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},y=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),f=i[0],p=i[1],h=Object(a.useState)(""),y=Object(o.a)(h,2),j=y[0],O=y[1],k=Object(a.useState)(""),w=Object(o.a)(k,2),x=w[0],C=w[1],S=Object(a.useState)({message:"",type:""}),P=Object(o.a)(S,2),T=P[0],F=P[1],I=function(){v().then((function(e){u(e)}))};Object(a.useEffect)(I,[]);var A=[{text:"name",handler:function(e){p(e.target.value)},value:f},{text:"number",handler:function(e){O(e.target.value)},value:j}],J=n.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(d,{message:T}),r.a.createElement(l,{filter:x,handleFilter:function(e){C(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(s,{addPerson:function(e){e.preventDefault();var t={name:f,number:j};if(n.find((function(e){return e.name===f}))){var a=n.find((function(e){return e.name===f}));if(!window.confirm("".concat(f," is already added to the phonebook, replace the old number?")))return;E(a.id,t).then((function(e){u(n.map((function(t){return t.id!==a.id?t:e}))),p(""),O("")})).catch((function(e){F({message:e.response.data.error,type:"error"}),setTimeout((function(){F({message:"",type:""})}),5e3),u(n)}))}else b(t).then((function(e){u(n.concat(e)),p(""),O(""),F({message:"Added '".concat(f,"'"),type:"success"}),setTimeout((function(){F({message:"",type:""})}),5e3)})).catch((function(e){console.log(e.response.data),F({message:e.response.data.error,type:"error"}),setTimeout((function(){F({message:"",type:""})}),5e3),u(n)}))},addInputs:A}),r.a.createElement("h3",null,"Numbers"),J.map((function(e,t){return r.a.createElement(m,{key:t,person:e,deletePerson:function(){return function(e){g(e.id).then(I).catch((function(t){F({message:"the person '".concat(e.name,"' was already deleted from the server"),type:"error"}),setTimeout((function(){F({message:"",type:""})}),5e3),u(n.filter((function(t){return t.id!==e.id})))}))}(e)}})})))};n(36);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f42ce4a1.chunk.js.map